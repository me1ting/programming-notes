# 了解系统编程语言

[系统编程语言](https://en.wikipedia.org/wiki/System_programming_language)是用于[系统开发](https://en.wikipedia.org/wiki/Systems_programming)的编程语言。所谓系统，即为其它软件提供基础服务的平台，比如操作系统，游戏引擎等。

当今的系统编程语言关注性能、安全性、人体工程学。

## 系统编程语言的熟面孔和网红

在技术社区讨论系统编程语言时，总是离不开一些语言，它们是系统编程语言的熟面孔。此外一些语言也经常被提及，它们是系统编程语言界的网红。

本人对于人们提到的这些语言好奇，因此花了简短的时间了解一番。

| 语言     | 首次发布时间   | 1.0时间 | Github Stars | 相关组织                    | 标志性产品              |
| ------ | -------- | ----- | ------------ | ----------------------- | ------------------ |
| C      | 1972     |       |              | ISO&IEC                 | Unix,Linux         |
| C++    | 1985     |       |              | C++ 标准委员会               | Windows,Qt         |
| D      | 2001     | 2007  | 5k           |                         |                    |
| Nim    | 2008     | 2019  | 16.6k        |                         |                    |
| Go     | 2009     | 2012  | 124k         | Google                  | Kubernetes, Docker |
| Rust   | 2012     | 2015  | 98.4k        | Mozilla,Rust Foundation | Servo,Linux Driver |
| Zig    | 2016     |       | 34.9k        |                         | Bun                |
| Odin   | 2016     |       | 6.9k         | JangaFX                 | JangaFX的相关产品       |
| C3     | 2021     |       | 3k           |                         |                    |
| Carbon | 2025(预计) |       | 32.3k        | Google                  |                    |

### C

C包括后续提到的C++，是20世纪系统编程语言中唯二的常青树，在21世纪依然大放光彩。

很多基础软件设施是采用C开发的，比如Unix,Linux,Redis等。

C的主流编译器（GCC,MSVC,LLVM）都提供了稳定的ABI，使得它的二进制格式是跨编程语言调用(FFI)的事实标准。

C的问题在于，它的语法过于老旧，存在着许多`陷阱和缺陷`。相比现代编程语言，C缺乏很多标准的基础设施：标准库、包管理器等。C语言本身并不复杂，但是实际项目使用的C语言对于新手而言很复杂，它包含了很多C语言教科书未提及的潜规则。

### C++

在C语言的基础上添加了许多Feature，这正是C++名称的由来。准确来讲，C++是基于C的分叉，虽然C++的编译器通常能编译C，但C++并非完全兼容目前的C，而且它们的语言风格也并不相同。

C++最初添加的最重要的Feature是OOP，它满足了20世纪90年代开始的GUI编程需求，也因此在桌面GUI编程领域大放异彩。

C++存在与C相同的问题：

- 很多语法过于老旧，存在陷阱和缺陷
- 缺乏标准的基础设施：标准库、包管理器等

C++还存在太过臃肿的问题，它添加了太多的功能，使得实际项目中不得不约定一个子集来使用，这对学习者、使用者、阅读者而言都是阻碍。
### Go

Go是一个`better C`，Google开发它是为了在云时代提供一个开发效率不错且运行效率不错的编程语言。

从性能考虑，因为采用垃圾回收，人们通常并未把Go看作系统编程语言。但因为Kubernetes和Docker的原因，Go也被(Wiki)归类在系统编程语言的行列。

Kubernetes和Docker扮演的是资源管理者，而非资源提供者，因此对它们而言，性能并不是最重要的。

### Rust

Rust是除C,C++,Go以外，目前使用人数最多的系统编程语言，人们通常将其看作一个`better C++`。Rust以其强调安全性而闻名，它是不采用垃圾回收器但也不需要手动内存管理的系统编程语言。

Rust的优点是大多数错误在编译时就能发现，只要编译通过，程序就能正常运行。

Rust的缺点在于，它发明新的概念，或者从历史的角落找出了不为人知的概念，学习曲线相对陡峭。

### Zig

Zig致力于取代C语言，目前来看，它是除了Go以外，在`better C`领域的佼佼者。

Zig的特色在于，对于C的高亲合性（宣传如此，是否实现未知），其它系统编程语言虽然都支持基于C的FFI，但是这些FFI实现都相对繁琐，很难学习也很难使用。但Zig在这方面成本极低。

### Odin

Odin是JangaFX公司的产品，这是一家卖3D动画软件（适用于游戏、电影）的公司，这些软件都是使用Odin编写。

Odin是一个`better C`，它为所有主流图形 API 提供了官方库，这是它在各种 better C 语言中的独特优势。

Odin因JangaFX的相关产品而生，但也因此绑定。因为缺乏在其它方面的投入，它距离成为一门通用的系统编程语言还有很遥远的路。

### C3

C3是一个`better C`，与Zig等语言不同点在于，C3强调“C3 是 C 的演变”，其与C的交互是默认支持的，即比Zig的成本更低。

C3目前还属于个人作品，很难能看到其脱离小众的一天。

### Carbon

Carbon是一个实验性质的`better C++`。C++是Google第一使用率的编程语言，Google推出Carbon，也是希望为自己庞大的C++资产寻找一个合适的继承方式。

Carbon的思路与TS、C3类似，强调与现有语言(C++)的可交互性，从而尽可能利用现有的资产。

但这个语言距离成熟的那一天还很遥远。

### D/Nim

已发布正式版本，但没流行过，目前也没什么讨论度的系统编程语言。

## 总结

编程语言实质上就是一个软件，发明新的编程语言并非难事，无非是现有编程元素（可能做一些变形）的排列组合。

发明一个足够流行的编程语言的难点在于，需要养一个专业团队去编写工具链、标准库、解决issues，还需要提供应用场景。因此现在流行的编程语言，大多是商业公司推动，基于它们的商业目的进行开发和演变。