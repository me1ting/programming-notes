# 基本语法

一些需要熟悉的常见语法：

- 形式参数类型简写
- 无返回值，多返回值的语法形式
- `结果变量`（命名返回值）
- 参数按值传递
- 无函数体，表示native实现

# error

在Go中，error表示意料之中可能发生的非正常情况。Go使用控制流来处理错误。
# 函数式编程

Go对函数式编程仅做有限的支持。

`函数变量`被支持，相关概念包括`函数表达式`（也被称为`匿名函数`）、`函数类型`（指形式参数类型列表和返回值类型列表称为函数签名）：

```
add := func (x, y int) int {
    return x + y
}
```

函数变量是一种`引用类型`，因为它可能引用了外部变量。

# 外部变量的陷阱

很容易就写出这样的代码：

```go
func main() {
	for i := 0; i < 9; i++ {
		go func() {
			fmt.Print(i, " ")
		}()
	}
	time.Sleep(5 * time.Second)
}
```

结果却可能输出这样的结果：

```
7 9 9 9 9 8 9 9 8
```

这是在支持外部变量的所有编程语言中常见的陷阱，**内部函数捕获的是外部变量，而非其值**，解决办法是使用局部变量存储值。

# 变长函数

```go
func sum(vals ...int) int {
}
```

接收变量为一`slice`，当无参传递时，值为nil。

在Python中有称为`解包`的语法，在Go中没有这样的定义，但有这样的形式：

```go
values := []int{1,2,3,4}
s := sum(values...)
```

*这个语法实际中很少使用*
# defer

Go发明了`defer`这一语法，主要用于关闭资源。其特点是：

- 函数和参数立即求值，函数调用延迟执行
- 在函数体执行完之后执行，**可以修改结果变量**，也可以`return`新的结果
- 多个defer基于FILO的顺序模型
# panic

panic表示意料之外的非正常情况。

由内建函数`panic`触发，也可以调用`log.Fatial()`等方式间接触发。

触发panic后，默认会退出程序。但可以使用特殊的流程进行恢复，参考书籍或文档。
