# 概览

TypeScript给JavaScript带来了类型系统，这是任何一个接触过TypeScript都了解的事情。

让人感兴趣的是，TypeScript是如何设计这个类型系统的。在我看来，由于类型在编译时被擦除，**弱化类型名称**是TypeScript的核心思想之一。`类型别名`告诉了我们类型名称在TypeScript中不太重要，`对象类型`,`联合类型`,`文字类型`都支持使用**类型字面量**，这在常用编译型语言中难以想象。

# ”基本“类型

TypeScript补充了以下类型：

## any

表示任意类型。

# 类型注释

显式指定变量的类型：

```typescript
let myName: string = "Alice";
```

# 函数

带类型注释的函数，`参数的类型注释`和`返回值的类型注释`都是可选，但建议都带上。

```typescript
function half(n: number): number {
  return n/2;
}
```

> 匿名函数是个特例，不建议带上参数类型（语法上是否允许带参数类型并未测试）

# 对象类型

TypeScript的对象类型虽然最终被编译为JavaScript中的Object，但它更类似Go,Rust中的`struct`。

```typescript
function printCoord(pt: { x: number; y: number }) {
  console.log("The coordinate's x value is " + pt.x);
  console.log("The coordinate's y value is " + pt.y);
}
```



# 联合类型

TypeScript提供了`Union`类型：

```typescript
function printId(id: number | string) {
  console.log("Your ID is: " + id);
}
```

目前不清楚其应用场景，但是理解起来确实复杂：

默认情况下，对Union类型的合法操作是所有可能类型的操作的**交集**。

可以通过限定Union可能的实际类型，来使用特定类型的合法操作：

- `typeof`可以用来限定实际类型
- `Array.isArray`可以用来限定实际类型

> Go有`type switch`，Java有`instanceof`+强制类型转换，而TypeScript这种只使用一个类型判断而缺乏类型转换的过程在我看来不太严谨。
>
> 后续：handbook啰嗦了[一大堆](https://www.typescriptlang.org/docs/handbook/2/narrowing.html)，真没看的兴趣。

# 类型别名

从观感角度来讲，`类型别名`有点类似Go,Rust（好久没用了，不确定）那样的自定义类型，我们可以给对象类型和联合类型定义名称，以及给“基本”类型定义名称。

从实际角度来讲，TypeScript中的`类型别名`**仅仅是别名而已**，而非真正的自定义类型。

# 接口

TypeScript中的接口**颠覆了传统语言中的接口具体实现**，更加接近理论中的接口概念：

- 公开字段也是接口的一部分，而不仅仅是方法

```typescript
interface Point {
  x: number;
  y: number;
}
```

# 类型断言

```typescript
const myCanvas = document.getElementById("main_canvas") as HTMLCanvasElement;
```

某种意义上的强制类型转换。

# 文字类型

`文字类型`是TypeScript所**特有**的，类型为字符串本身，且只有唯一值本身：

```typescript
// "hello"是文字类型，其类型唯一值"hello"
let x: "hello" = "hello";
```

其**唯一**的用处就是通过Union来实现**字符串类型的枚举类型**：

```typescript
function printText(s: string, alignment: "left" | "right" | "center") {
  // ...
}
```

> TypeScript有独立的[枚举类型](https://www.typescriptlang.org/docs/handbook/enums.html)，这里的“枚举”实现意义在于：更加轻量简洁、更容易使用

# Refs

《handbook》 [类型](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html)

