# 异常
dart采用`未检查异常`设计。

>未检查异常指函数不需要声明会抛出哪些异常，你也不需要捕获这些异常

异常可以是任何`非null`值，dart预定义了`Exception`与`Error`两大基础异常类型。

>是不是JavaScript的异常体系的既视感很重？

# throw
```dart
throw 'Out of llamas!';
```

# catch
语法细节需要熟悉：
```dart
try {
  breedMoreLlamas();
} on OutOfLlamasException {
  // 特定类型，但不捕获对象
  buyMoreLlamas();
} on Exception catch (e) {
  // 其它Exception异常
  print('Unknown exception: $e');
} catch (e) {
  // 兜底
  print('Something really unknown: $e');
}
```

区分异常对象和`stack trace`：
```dart
try {
  // ···
} on Exception catch (e) {
  print('Exception details:\n $e');
} catch (e, s) {//stack trace 是可选的
  print('Exception details:\n $e');
  print('Stack trace:\n $s');
}
```

重新抛出异常的语法糖，使用`rethrow`关键字：
```dart
void misbehave() {
  try {
    dynamic foo = true;
    print(foo++); // Runtime error
  } catch (e) {
    print('misbehave() partially handled ${e.runtimeType}.');
    rethrow; // Allow callers to see the exception.
  }
}
```

# finally
```dart
try {
  breedMoreLlamas();
} finally {
  // Always clean up, even if an exception is thrown.
  cleanLlamaStalls();
}
```