# 前言

`字符集`是字符的集合与编码方式，`排序规则`是对字符/字符串进行顺序排列的规则。

就mysql 8.0而言，默认的`字符集`与`排序规则`设置足以满足大部分需求，不了解相关概念以及mysql的实现没有什么问题。

需要了解它们的原因是，mysql存在历史问题，在使用旧版本(5.x)时会遇到字符集问题。

# 字符集

字符集的相关知识不是本文关注的问题，这里预设了你了解字符集的通用概念，知道ascii,gb2312,gbk,unicode,utf-8等缩写的含义。

这里仅关注mysql对字符集的支持。

## utf8mb3与utf8mb4

mysql的utf8编码有两个实现：`utf8mb3`,`utf8mb4`，这让人大为困惑。

这是历史原因造成的，unicode标准在过去20年不断的发展，mysql对于unicode的支持也在不断完善。

`utf8mb3`是对utf-8编码的不完整支持，其中`mb3`是`max bytes 3`的缩写，`utf8mb3`只支持utf-8中最大长度为3个字节的编码。

`utf8mb4`是对utf-8编码最新的支持，支持最大长度为4个字节的编码。

# 排序规则

**对中英文而言**，字符/字符串中只有`英文字母`,`数字`存在**自然序**的概念，编码方案在构建编码时会遵守这些自然序。

个人没有遇到过排序规则的相关问题，因此了解不多，目前只知道一个`字符等价性`的概念。

## 字符等价性

一些编码方案存在“重复”的字符，对于中文开发者来说，最熟悉的是半角和全角：

```
abcdefg
ａｂｃｄｅｆｇｈ
```

在一些场景中，可能会认为它们是相同的字符，`字符等价性`概念就是用来描述这个问题。

# 总结

`字符集`是计算机领域的常识。字符集的`排序规则`是字符集领域的专业知识，除非涉及到相关问题，了解有这么个概念就行了。

如果使用的是mysql8，不需要担心字符集和排序规则的设置，默认的`utf8mb4`与`utf8mb4_0900_ai_ci`足以满足大部分应用场景。

如果使用的是旧版本mysql，默认的字符集和排序规则通常不满足需求，手动设置为mysql8的默认字符集和排序规则。