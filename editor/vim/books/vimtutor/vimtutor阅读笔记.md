# vimtutor阅读笔记

阅读版本为vimtutor 1.7。

## 打开和关闭文档

```bash
# 打开文档
vim filename
# 退出
:q
# 强制退出，丢弃修改
:q!
# 写入并退出
:wq
# 另存为
:w filename
```

如果缓冲区存在数据，没法使用`:q`退出。

当提示写入权限不足时，或我们不想保存修改，我们需要`:q!`强制退出。

`q`是`quit`的缩写，`w`是`write`的缩写。

## 三种主要模式

vim主要有以下3种模式：

- 编辑模式，类似普通文本编辑器
- 浏览模式，在浏览模式下会使用一些快捷键，比如使用`i`,`j`,`k`,`l`移动光标
- 命令模式，关闭文档就要用到命令模式

vim的默认模式是浏览模式。

浏览模式下，使用一些快捷键进入编辑模式，比如下面介绍的`i`,`a`。使用`esc`退出编辑模式，回到浏览模式。

浏览模式下，使用`:`(shift+;按键)进入命令模式，删除输入的命令和`:`，回到浏览模式。

## 快捷键

`vim`的快捷键设计巧妙，其缩写有一些含义，应当配合其含义来理解记忆这些快捷键。

### 移动光标

常用：

- `i`,`j`,`k`,`l` 左上下右移动光标
- `w`(word的缩写) 移动光标到单词首字母，`we`(word end的缩写)，还可以带量词：`2w`
- `^`(正则行结尾),`$`(正则行结尾)
- `gg` 文档开头，`G`文档末尾，`10G`第10行

### 编辑文档

常用：

- `i`,`insert`的缩写，表示插入当前光标位置
- `I`,是`i`的大写，表示插入行开头
- `a`,`append`的缩写，表示添加到当前光标的下一个位置
- `A`,是`a`的大写，表示添加到行末尾
- `x`,不是缩写，表示删除当前光标所在字符，可以记忆为打x，表示否定（未考证作者的原意）
- `d`,`delete`的缩写，`dw`,`d2w`，d$，`dd`(删除行)
- `r`,`replace`的缩写，表示替换光标所在字符
- `c`,`change`的缩写，表示对部分文本进行替代，也就是删除然后进入编辑模式，如: `cw`,`c$`
- `o`,表示`open a line`，指在当前行下增加新行，然后进入编辑模式
- `O`,是`o`的大写，指在当前行上方增加新行，然后进入编辑模式

### 撤销和恢复

常用：

- `u`,`undo`的缩写
- `Ctrl+r`,记作`redo`

### 复制,粘贴

所有被删除内容都会进入寄存器，可以使用`p`(`put`的缩写)将最后进入寄存器的数据放置在光标所在位置的后面。

`y`是`yank`的缩写，表示复制，`yw`,`y$`

### 查找和替换

`/查找字符串`进入查找模式。

`n`表示下一个位置，`N`表示上一个位置。

`:s/old/new`，`s`是`substitute`的缩写，在本行替换第一次
`:s/old/new/g`，`g`是`global`的缩写，在本行进行所有替换
`:%s/old/new/g`，`%`表示整个文本，在整个文档进行替换
:`%s/old/new/gc`，`c`是`confirm`的缩写，在整个文档进行替换，每次替换都要求确认

_这部分确实难以记忆，因此这里仅作记录_

### 视图模式

使用`v`(visual的缩写)进入视图模式，可以选择**跨行数据**。

在视图模式下，可以对跨行数据进行`y`,`d`等操作。
